import"./modulepreload-polyfill-B5Qt9EMX.js";import{at as g,au as b,a0 as f,av as y,aw as S,E}from"./MaterialBase-BpiTyhsa.js";import{G as L}from"./GLTFLoader-CQup9ecK.js";import{O as C}from"./OrbitControls-D85FXo-B.js";import{R as P}from"./RGBELoader-D6FJcT4_.js";import{P as R}from"./ParallelMeshBVHWorker-C3soLrCh.js";import{g as k}from"./getScaledSettings-nzgggDDj.js";import{L as v}from"./LoaderElement-kg8-0xPv.js";import{W as x}from"./WebGLPathTracer-Cpus8pis.js";import"./BufferGeometryUtils-CVTBXag-.js";import"./pcg.glsl-DWfbdcxb.js";import"./PathTracingRenderer-BPwEUhqE.js";import"./ggx_functions.glsl-BPuHaSoe.js";const T="https://raw.githubusercontent.com/gkjohnson/3d-demo-data/master/hdri/chinese_garden_1k.hdr",M="https://raw.githubusercontent.com/gkjohnson/3d-demo-data/main/models/terrarium-robots/scene.gltf",W='Model by "nyancube" on Sketchfab',A="Simple path tracing example scene setup with background blur.";let t,r,s,i,n,o;G();async function G(){const{tiles:d,renderScale:u}=k();o=new v,o.attach(document.body),r=new g({antialias:!0}),r.toneMapping=b,document.body.appendChild(r.domElement),t=new x(r),t.filterGlossyFactor=.5,t.renderScale=u,t.tiles.set(d,d),t.setBVHWorker(new R),i=new f(75,1,.025,500),i.position.set(8,9,24),n=new y,n.backgroundBlurriness=.05,s=new C(i,r.domElement),s.target.y=10,s.addEventListener("change",()=>t.updateCamera()),s.update();let c;if(window.location.hash.includes("cube")){const e="https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/cube/SwedishRoyalCastle/",a=".jpg",h=[e+"px"+a,e+"nx"+a,e+"py"+a,e+"ny"+a,e+"pz"+a,e+"nz"+a];c=new S().loadAsync(h),n.environmentIntensity=5,n.backgroundIntensity=5}else c=new P().loadAsync(T).then(e=>(e.mapping=E,e));const[w,m]=await Promise.all([new L().loadAsync(M),c]);n.background=m,n.environment=m,n.add(w.scene),await t.setSceneAsync(n,i,{onProgress:e=>o.setPercentage(e)}),o.setCredits(W),o.setDescription(A),window.addEventListener("resize",l),l(),p()}function l(){r.setSize(window.innerWidth,window.innerHeight),r.setPixelRatio(window.devicePixelRatio),i.aspect=window.innerWidth/window.innerHeight,i.updateProjectionMatrix(),t.updateCamera()}function p(){requestAnimationFrame(p),t.renderSample(),o.setSamples(t.samples,t.isCompiling)}
